package net.kencochrane.raven;

import net.kencochrane.raven.dsn.Dsn;
import org.artyomcool.ravenproxy.impl.DummyRavenCache;
import org.junit.Test;

public class CrashTest {

    @Test
    public void crash() {
        Raven raven = new DummyRavenCache().forFingerPrint(null);

        raven.sendEvent("{\"event_id\":\"0e91f67d-ef4d-4bac-a823-52978748d36e\",\"exception\":[{\"module\":\"ru\",\"stacktrace\":{\"frames\":[{\"function\":\"safeThrow\",\"lineno\":87,\"module\":\"ru.mail.util.DebugUtils\"},{\"function\":\"run\",\"lineno\":73,\"module\":\"ru.mail.eggs.CommandProcessor$Command$7$1\"},{\"function\":\"runCommand\",\"lineno\":107,\"module\":\"ru.mail.eggs.CommandProcessor\"},{\"function\":\"sendTextMessageLegacy\",\"lineno\":180,\"module\":\"ru.mail.instantmessanger.IMService\"},{\"function\":\"sendClicked\",\"lineno\":956,\"module\":\"ru.mail.im.chat.ChatFragment\"},{\"function\":\"onClick\",\"lineno\":213,\"module\":\"ru.mail.im.chat.ChatFragment_$7\"},{\"function\":\"performClick\",\"lineno\":4438,\"module\":\"android.view.View\"},{\"function\":\"run\",\"lineno\":18422,\"module\":\"android.view.View$PerformClick\"},{\"function\":\"handleCallback\",\"lineno\":733,\"module\":\"android.os.Handler\"},{\"function\":\"dispatchMessage\",\"lineno\":95,\"module\":\"android.os.Handler\"},{\"function\":\"loop\",\"lineno\":136,\"module\":\"android.os.Looper\"},{\"function\":\"main\",\"lineno\":5001,\"module\":\"android.app.ActivityThread\"},{\"function\":\"invokeNative\",\"lineno\":-2,\"module\":\"java.lang.reflect.Method\"},{\"function\":\"invoke\",\"lineno\":515,\"module\":\"java.lang.reflect.Method\"},{\"function\":\"run\",\"lineno\":785,\"module\":\"com.android.internal.os.ZygoteInit$MethodAndArgsCaller\"},{\"function\":\"main\",\"lineno\":601,\"module\":\"com.android.internal.os.ZygoteInit\"},{\"function\":\"main\",\"lineno\":-2,\"module\":\"dalvik.system.NativeStart\"}]},\"type\":\"mail.util.DebugUtils$SmartException\",\"value\":\"java.lang.RuntimeException: Test exception\"},{\"module\":\"java\",\"stacktrace\":{\"frames\":[{\"function\":\"run\",\"lineno\":73,\"module\":\"ru.mail.eggs.CommandProcessor$Command$7$1\"},{\"function\":\"runCommand\",\"lineno\":107,\"module\":\"ru.mail.eggs.CommandProcessor\"},{\"function\":\"sendTextMessageLegacy\",\"lineno\":180,\"module\":\"ru.mail.instantmessanger.IMService\"},{\"function\":\"sendClicked\",\"lineno\":956,\"module\":\"ru.mail.im.chat.ChatFragment\"},{\"function\":\"onClick\",\"lineno\":213,\"module\":\"ru.mail.im.chat.ChatFragment_$7\"},{\"function\":\"performClick\",\"lineno\":4438,\"module\":\"android.view.View\"},{\"function\":\"run\",\"lineno\":18422,\"module\":\"android.view.View$PerformClick\"},{\"function\":\"handleCallback\",\"lineno\":733,\"module\":\"android.os.Handler\"},{\"function\":\"dispatchMessage\",\"lineno\":95,\"module\":\"android.os.Handler\"},{\"function\":\"loop\",\"lineno\":136,\"module\":\"android.os.Looper\"},{\"function\":\"main\",\"lineno\":5001,\"module\":\"android.app.ActivityThread\"},{\"function\":\"invokeNative\",\"lineno\":-2,\"module\":\"java.lang.reflect.Method\"},{\"function\":\"invoke\",\"lineno\":515,\"module\":\"java.lang.reflect.Method\"},{\"function\":\"run\",\"lineno\":785,\"module\":\"com.android.internal.os.ZygoteInit$MethodAndArgsCaller\"},{\"function\":\"main\",\"lineno\":601,\"module\":\"com.android.internal.os.ZygoteInit\"},{\"function\":\"main\",\"lineno\":-2,\"module\":\"dalvik.system.NativeStart\"}]},\"type\":\"lang.RuntimeException\",\"value\":\"Test exception\"}],\"level\":\"error\",\"message\":\"java.lang.RuntimeException: Test exception\",\"user\":{\"email\":\"655521115\"}}".getBytes());
        raven.sendEvent("{\"event_id\":\"1e91f67d-ef4d-4bac-a823-52978748d36e\",\"exception\":[{\"module\":\"ru\",\"stacktrace\":{\"frames\":[{\"function\":\"safeThrow\",\"lineno\":87,\"module\":\"ru.mail.util.DebugUtils\"},{\"function\":\"run\",\"lineno\":73,\"module\":\"ru.mail.eggs.CommandProcessor$Command$7$1\"},{\"function\":\"runCommand\",\"lineno\":107,\"module\":\"ru.mail.eggs.CommandProcessor\"},{\"function\":\"sendTextMessageLegacy\",\"lineno\":180,\"module\":\"ru.mail.instantmessanger.IMService\"},{\"function\":\"sendClicked\",\"lineno\":956,\"module\":\"ru.mail.im.chat.ChatFragment\"},{\"function\":\"onClick\",\"lineno\":213,\"module\":\"ru.mail.im.chat.ChatFragment_$7\"},{\"function\":\"performClick\",\"lineno\":4438,\"module\":\"android.view.View\"},{\"function\":\"run\",\"lineno\":18422,\"module\":\"android.view.View$PerformClick\"},{\"function\":\"handleCallback\",\"lineno\":733,\"module\":\"android.os.Handler\"},{\"function\":\"dispatchMessage\",\"lineno\":95,\"module\":\"android.os.Handler\"},{\"function\":\"loop\",\"lineno\":136,\"module\":\"android.os.Looper\"},{\"function\":\"main\",\"lineno\":5001,\"module\":\"android.app.ActivityThread\"},{\"function\":\"invokeNative\",\"lineno\":-2,\"module\":\"java.lang.reflect.Method\"},{\"function\":\"invoke\",\"lineno\":515,\"module\":\"java.lang.reflect.Method\"},{\"function\":\"run\",\"lineno\":785,\"module\":\"com.android.internal.os.ZygoteInit$MethodAndArgsCaller\"},{\"function\":\"main\",\"lineno\":601,\"module\":\"com.android.internal.os.ZygoteInit\"},{\"function\":\"main\",\"lineno\":-2,\"module\":\"dalvik.system.NativeStart\"}]},\"type\":\"mail.util.DebugUtils$SmartException\",\"value\":\"java.lang.RuntimeException: Test exception\"},{\"module\":\"java\",\"stacktrace\":{\"frames\":[{\"function\":\"run\",\"lineno\":73,\"module\":\"ru.mail.eggs.CommandProcessor$Command$7$1\"},{\"function\":\"runCommand\",\"lineno\":107,\"module\":\"ru.mail.eggs.CommandProcessor\"},{\"function\":\"sendTextMessageLegacy\",\"lineno\":180,\"module\":\"ru.mail.instantmessanger.IMService\"},{\"function\":\"sendClicked\",\"lineno\":956,\"module\":\"ru.mail.im.chat.ChatFragment\"},{\"function\":\"onClick\",\"lineno\":213,\"module\":\"ru.mail.im.chat.ChatFragment_$7\"},{\"function\":\"performClick\",\"lineno\":4438,\"module\":\"android.view.View\"},{\"function\":\"run\",\"lineno\":18422,\"module\":\"android.view.View$PerformClick\"},{\"function\":\"handleCallback\",\"lineno\":733,\"module\":\"android.os.Handler\"},{\"function\":\"dispatchMessage\",\"lineno\":95,\"module\":\"android.os.Handler\"},{\"function\":\"loop\",\"lineno\":136,\"module\":\"android.os.Looper\"},{\"function\":\"main\",\"lineno\":5001,\"module\":\"android.app.ActivityThread\"},{\"function\":\"invokeNative\",\"lineno\":-2,\"module\":\"java.lang.reflect.Method\"},{\"function\":\"invoke\",\"lineno\":515,\"module\":\"java.lang.reflect.Method\"},{\"function\":\"run\",\"lineno\":785,\"module\":\"com.android.internal.os.ZygoteInit$MethodAndArgsCaller\"},{\"function\":\"main\",\"lineno\":601,\"module\":\"com.android.internal.os.ZygoteInit\"},{\"function\":\"main\",\"lineno\":-2,\"module\":\"dalvik.system.NativeStart\"}]},\"type\":\"lang.RuntimeException\",\"value\":\"Test exception\"}],\"level\":\"error\",\"message\":\"java.lang.RuntimeException: Test exception\",\"user\":{\"email\":\"655521115\"}}".getBytes());

    }

}
